{% extends "system.html" %}

{% block content %}
<div class="col-md-6 col-md-offset-3">
    <form action="/cate/edit" id="addcateForm" method="post">
        <div class="form-group">
            <label>标题</label>
            <input type="text" class="form-control" name="name" required>
        </div>
        <div class="form-group">
            <label>选项</label>
            <div id="sections"></div>
            <div class="input-group">
                <input type="text" class="form-control" id="section" />
                <span class="input-group-btn">
                    <button id="add-section" class="btn btn-default" type="button">添加</button>
                </span>
            </div>
        </div>
        <div class="form-group">
            <label>答案</label>
            <div class="radio">
                <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios1"
                    value="option1" checked> 选项 1
                </label>
                <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios2"
                    value="option1"> 选项 2
                </label>
                <label>
                    <input type="radio" name="optionsRadios" id="optionsRadios3"
                    value="option1"> 选项 3
                </label>
            </div>
        </div>
        <div class="form-group">
            <label>过期时间</label>
            <div class="input-group">
                <input type="number" class="form-control" name="name" required min="1">
                <span class="input-group-addon">天</span>
            </div>
        </div>
        <button type="submit" class="btn btn-default">提交</button>
        {% raw xsrf_form_html() %}
    </form>
</div>
<script type="text/javascript">
$(document).ready(function (){
    var totalsec = 0;

    function radiohtml(){
        _html = '<label><input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked=""> 选项 1 </label>'
    }

    $("#add-section").on("click", function (e){
        var _html = $("#sections").html();
        totalsec ++;
        _html += '<div class="input-group"><input type="text" id="sec-'+totalsec+'" class="form-control" value="'+$("#section").val()+'" /> <span class="input-group-btn"> <button class="btn btn-warning" id="sec-mv-'+totalsec+'" type="button">移除</button> </span></div>';
        $("#sections").html(_html);
        $("#section").val("");
    });

    $("#sections").on("click", "button", function (e){
        $(this).parent().parent().remove();
        totalsec--;
        $("#sections .input-group").each(function (i){
            $(this).find('input').attr("id", "sec-"+(i+1));
            $(this).find('button').attr("id", "sec-mv-"+(i+1));
        });
    });
});
</script>
<style>
    #sections .input-group{
        padding: 10px 0;
    }
</style>
{% end %}